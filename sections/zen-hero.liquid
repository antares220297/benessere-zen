{% comment %}
  Zen Incense Hero Section for Benessere Zen
  Authentic zen atmosphere with incense GIF background and optimized typography
  Features: incense animation, professional text overlay, "qui" special effect
{% endcomment %}

<section class="zen-hero-premium" id="zen-hero-{{ section.id }}" 
         data-height="{{ section.settings.height }}">
  
  <!-- Background Image/Video/GIF -->
  {% if section.settings.background_gif %}
    <div class="hero-background">
      <img src="{{ section.settings.background_gif }}" 
           alt="Zen incense atmosphere" 
           class="hero-gif" 
           loading="eager">
    </div>
  {% elsif section.settings.background_video %}
    <div class="hero-background">
      <video autoplay muted loop playsinline class="hero-video">
        <source src="{{ section.settings.background_video }}" type="video/mp4">
      </video>
    </div>
  {% elsif section.settings.background_image %}
    <div class="hero-background">
      <img src="{{ section.settings.background_image | img_url: '1920x1080' }}" 
           alt="{{ section.settings.headline }}" 
           class="hero-image" 
           loading="eager">
    </div>
  {% else %}
    <!-- Default Zen Skincare Background -->
    <div class="hero-background zen-skincare-bg">
      <img src="https://cdn.shopify.com/s/files/1/0917/9719/3042/files/skincare-6664574.jpg?v=1755102408" 
           alt="Zen Skincare" 
           class="hero-image-bg" 
           loading="eager">
      <div class="zen-light-effect"></div>
    </div>
  {% endif %}

  <!-- Overlay -->
  {% if section.settings.overlay_opacity > 0 %}
    <div class="hero-overlay" style="opacity: {{ section.settings.overlay_opacity | divided_by: 100.0 }};"></div>
  {% endif %}

  <!-- Main Content Container -->
  <div class="hero-container">
    <div class="hero-content">
      
      <!-- Main Text Content - Premium Direct Approach -->
      <div class="hero-text-content">
        {% if section.settings.headline %}
          <h1 class="hero-headline">
            {{ section.settings.headline | replace: 'qui', '<span class="highlight-word" data-text="qui">qui</span>' }}
          </h1>
        {% endif %}
        
        {% if section.settings.subheadline %}
          <p class="hero-subheadline">{{ section.settings.subheadline }}</p>
        {% endif %}
      </div>

      <!-- CTA Buttons -->
      {% if section.settings.show_cta_buttons %}
        <div class="hero-actions">
          {% if section.settings.primary_button_text %}
            <a href="{{ section.settings.primary_button_link }}" class="zen-btn zen-btn--primary">
              {{ section.settings.primary_button_text }}
              <svg class="btn-arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <path d="M5 12h14M12 5l7 7-7 7"/>
              </svg>
            </a>
          {% endif %}
          
          {% if section.settings.secondary_button_text %}
            <a href="{{ section.settings.secondary_button_link }}" class="zen-btn zen-btn--secondary">
              {{ section.settings.secondary_button_text }}
            </a>
          {% endif %}
        </div>
      {% endif %}

      <!-- Trust Badges at Bottom -->
      {% if section.settings.show_trust_badges %}
        <div class="trust-badges-container">
          <div class="trust-badge">
            <svg class="badge-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <circle cx="12" cy="12" r="10"/>
              <path d="M12 6v6l4 2"/>
            </svg>
            <span>Risultati in 7 Giorni</span>
          </div>
          <div class="trust-badge">
            <svg class="badge-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path d="M12 2L2 7v10c0 5.55 3.84 9.74 9 11 5.16-1.26 9-5.45 9-11V7l-10-5z"/>
              <path d="M9 12l2 2 4-4"/>
            </svg>
            <span>Garanzia Soddisfatti o Rimborsati</span>
          </div>
          <div class="trust-badge">
            <svg class="badge-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path d="M20 12V8H6a2 2 0 01-2-2c0-1.1.9-2 2-2h12v4"/>
              <path d="M4 6v12c0 1.1.9 2 2 2h14v-8"/>
              <path d="M18 12a2 2 0 11-4 0 2 2 0 014 0z"/>
            </svg>
            <span>Campioni Gratuiti Inclusi</span>
          </div>
        </div>
      {% endif %}

    </div>
  </div>

  <!-- Scroll Indicator -->
  {% if section.settings.show_scroll_indicator %}
    <div class="zen-scroll-indicator">
      <div class="scroll-line"></div>
      <div class="scroll-text">Scorri</div>
      <svg class="scroll-arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <path d="M6 9l6 6 6-6"/>
      </svg>
    </div>
  {% endif %}
</section>

<!-- Email Popup Hook -->
{% if section.settings.show_email_popup %}
  <div class="zen-email-popup-overlay" id="emailPopup">
    <div class="zen-email-popup">
      <button class="popup-close" onclick="closeEmailPopup()">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <path d="M18 6L6 18M6 6l12 12"/>
        </svg>
      </button>
      
      <div class="popup-content">
        <div class="popup-image">
          {% if section.settings.popup_image %}
            <img src="{{ section.settings.popup_image | img_url: '400x400' }}" alt="Regalo speciale">
          {% else %}
            <div class="popup-default-image">
              <svg viewBox="0 0 100 100" fill="none">
                <circle cx="50" cy="50" r="45" fill="rgba(87, 162, 120, 0.1)" stroke="var(--zen-primary)" stroke-width="2"/>
                <path d="M35 45h30M35 55h30M40 35v30M60 35v30" stroke="var(--zen-primary)" stroke-width="2" stroke-linecap="round"/>
              </svg>
            </div>
          {% endif %}
        </div>
        
        <div class="popup-text">
          <h3 class="popup-headline">
            {{ section.settings.popup_headline | default: "Vuoi ricevere un regalo?" }}
          </h3>
          <p class="popup-description">
            {{ section.settings.popup_description | default: "Ottieni il 15% di sconto sul tuo primo ordine + spedizione gratuita" }}
          </p>
          
          <form class="popup-form" onsubmit="submitPopupEmail(event)">
            <input type="email" 
                   class="popup-email-input" 
                   placeholder="{{ section.settings.popup_email_placeholder | default: 'La tua email' }}" 
                   required>
            <button type="submit" class="popup-submit-btn primary">
              {{ section.settings.popup_button_text | default: "Sì, lo voglio!" }}
            </button>
            <button type="button" class="popup-submit-btn secondary" onclick="closeEmailPopup()">
              {{ section.settings.popup_decline_text | default: "No, grazie" }}
            </button>
          </form>
          
          {% if section.settings.popup_disclaimer %}
            <p class="popup-disclaimer">{{ section.settings.popup_disclaimer }}</p>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
{% endif %}

<!-- Floating WhatsApp Button -->
{% if section.settings.show_whatsapp_button and section.settings.whatsapp_number %}
  <div class="zen-whatsapp-float">
    <a href="https://wa.me/{{ section.settings.whatsapp_number | remove: '+' | remove: ' ' | remove: '-' }}?text={{ section.settings.whatsapp_message | url_encode | default: 'Ciao! Sono interessato ai vostri prodotti naturali.' }}" 
       target="_blank" 
       class="whatsapp-btn">
      <svg viewBox="0 0 24 24" fill="currentColor">
        <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.890-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.488"/>
      </svg>
      <span class="whatsapp-text">Chat</span>
    </a>
  </div>
{% endif %}

<style>
/* Elegant Zen Hero for Sophisticated Women - benesserezen.shop */
@import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;600;700&display=swap');

.zen-hero-premium {
  position: relative;
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
  background: linear-gradient(135deg, #f8f6f3 0%, #ffffff 100%);
  font-family: 'Noto Sans JP', 'Noto Sans Japanese', sans-serif;
  
  /* benesserezen.shop Color Palette */
  --zen-primary: #57A278;
  --zen-secondary: #4B8968;  
  --zen-accent: #7E1C1C;
  --zen-text-primary: #252161;
  --zen-text-secondary: #4EFE8;
  --zen-background: #AEF6F8;
  --zen-card-bg: #8F4ED;
  --zen-border: #2C8C5;
  --zen-progress: #4B8968;
  --zen-white: #ffffff;
  --zen-light-text: #666666;
  --zen-shadow: rgba(87, 162, 120, 0.15);
  --zen-glass: rgba(255, 255, 255, 0.85);
}

/* Height Variations */
.zen-hero-premium[data-height="small"] { min-height: 70vh; }
.zen-hero-premium[data-height="medium"] { min-height: 85vh; }
.zen-hero-premium[data-height="large"] { min-height: 100vh; }

/* Background */
.hero-background {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 1;
  overflow: hidden;
}

/* Background Image Styling - Adjusted for transparent header */
.hero-image-bg {
  position: absolute;
  top: -80px;
  left: 0;
  width: 100%;
  height: calc(100% + 80px);
  object-fit: cover;
  object-position: center top;
  filter: brightness(0.75) contrast(1.1) saturate(0.9);
}

/* Zen Light Effect - Cross-device optimized */
.zen-light-effect {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: 
    radial-gradient(ellipse 800px 400px at 70% 20%, rgba(255, 255, 255, 0.1) 0%, transparent 50%),
    radial-gradient(ellipse 600px 300px at 30% 80%, rgba(87, 162, 120, 0.08) 0%, transparent 60%),
    linear-gradient(45deg, transparent 40%, rgba(255, 255, 255, 0.03) 50%, transparent 60%);
  animation: zen-gentle-light 12s ease-in-out infinite;
  pointer-events: none;
}

/* Zen gentle light animation - optimized for all devices */
@keyframes zen-gentle-light {
  0%, 100% { 
    background-position: 70% 20%, 30% 80%, 0% 0%;
    opacity: 1;
  }
  25% { 
    background-position: 80% 30%, 20% 70%, 10% 0%;
    opacity: 0.8;
  }
  50% { 
    background-position: 60% 40%, 40% 60%, 20% 0%;
    opacity: 0.9;
  }
  75% { 
    background-position: 75% 25%, 25% 75%, 15% 0%;
    opacity: 0.7;
  }
}

.hero-video, .hero-image, .hero-gif {
  width: 100%;
  height: 100%;
  object-fit: cover;
  object-position: center;
}

.hero-video {
  opacity: 0.9;
  filter: brightness(0.6) contrast(1.3) saturate(0.9);
}

.hero-gif {
  opacity: 0.7;
  filter: sepia(8%) brightness(0.95) contrast(1.05);
  background: transparent;
}

.hero-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: 
    radial-gradient(circle at 30% 40%, rgba(37, 33, 97, 0.4) 0%, transparent 60%),
    linear-gradient(135deg, rgba(0,0,0,0.3) 0%, rgba(0,0,0,0.1) 50%, transparent 90%);
  z-index: 2;
}

/* Container */
.hero-container {
  position: relative;
  z-index: 3;
  width: 100%;
  max-width: 1200px;
  margin: 0 auto;
  padding: 2rem 1.5rem;
}

.hero-content {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 2rem;
  text-align: center;
}

/* Professional Text Layout */
.hero-text-content {
  margin-bottom: 3rem;
}

/* Elegant "qui" Animation for Sophisticated Women */
.highlight-word {
  position: relative;
  color: var(--zen-primary);
  font-weight: 600;
  display: inline-block;
  transform-origin: center;
  animation: qui-elegant-glow 4s ease-in-out infinite;
}

.highlight-word::before {
  content: '';
  position: absolute;
  top: -2px;
  left: -2px;
  right: -2px;
  bottom: -2px;
  background: linear-gradient(45deg, 
    rgba(87, 162, 120, 0.3), 
    rgba(75, 137, 104, 0.2), 
    rgba(87, 162, 120, 0.3));
  border-radius: 4px;
  opacity: 0;
  filter: blur(8px);
  animation: qui-aura 4s ease-in-out infinite;
}

.highlight-word::after {
  content: '';
  position: absolute;
  bottom: -1px;
  left: 0;
  width: 0;
  height: 1px;
  background: linear-gradient(90deg, transparent, var(--zen-primary), transparent);
  animation: qui-underline 4s ease-in-out infinite;
}

@keyframes qui-elegant-glow {
  0%, 100% { 
    color: var(--zen-primary);
    text-shadow: 0 0 8px rgba(87, 162, 120, 0.3);
  }
  50% { 
    color: #6BC491;
    text-shadow: 0 0 12px rgba(87, 162, 120, 0.6), 0 0 20px rgba(87, 162, 120, 0.3);
  }
}

@keyframes qui-aura {
  0%, 100% { opacity: 0; transform: scale(0.8); }
  50% { opacity: 1; transform: scale(1.05); }
}

@keyframes qui-underline {
  0%, 100% { width: 0; left: 50%; }
  50% { width: 100%; left: 0; }
}

/* Elegant Typography for Sophisticated Women - Noto Sans Japanese */
.hero-headline {
  font-family: 'Noto Sans JP', 'Noto Sans Japanese', sans-serif;
  font-size: clamp(2.8rem, 7vw, 4.8rem);
  font-weight: 600;
  line-height: 1.2;
  color: #ffffff;
  margin: 0 0 1.5rem 0;
  letter-spacing: -0.015em;
  text-shadow: 
    0 2px 8px rgba(0,0,0,0.7),
    0 4px 16px rgba(37, 33, 97, 0.5),
    0 8px 24px rgba(0,0,0,0.3),
    0 0 30px rgba(87, 162, 120, 0.2);
}

.hero-subheadline {
  font-family: 'Noto Sans JP', 'Noto Sans Japanese', sans-serif;
  font-size: clamp(1.1rem, 2.5vw, 1.4rem);
  line-height: 1.5;
  color: #f5f5f5;
  font-weight: 400;
  margin: 0 0 2rem 0;
  opacity: 0.9;
  letter-spacing: 0.01em;
  text-shadow: 
    0 2px 6px rgba(0,0,0,0.7),
    0 4px 12px rgba(37, 33, 97, 0.4),
    0 8px 16px rgba(0,0,0,0.3);
}

/* Premium Buttons */
.hero-actions {
  display: flex;
  gap: 1rem;
  flex-wrap: wrap;
  justify-content: center;
}

.zen-btn {
  font-family: 'Noto Sans JP', 'Noto Sans Japanese', sans-serif;
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.9rem 1.8rem;
  text-decoration: none;
  font-size: 1rem;
  font-weight: 500;
  border-radius: 50px;
  transition: all 0.3s ease;
  min-width: 160px;
  justify-content: center;
  letter-spacing: 0.02em;
}

.zen-btn--primary {
  background: var(--zen-primary);
  color: white;
  box-shadow: 0 4px 20px rgba(87, 162, 120, 0.3);
}

.zen-btn--primary:hover {
  background: var(--zen-secondary);
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(87, 162, 120, 0.4);
}

.zen-btn--secondary {
  background: var(--zen-white);
  color: var(--zen-primary);
  border: 2px solid var(--zen-primary);
}

.zen-btn--secondary:hover {
  background: var(--zen-primary);
  color: white;
  transform: translateY(-2px);
}

.btn-arrow {
  width: 16px;
  height: 16px;
  stroke-width: 2;
  transition: transform 0.3s ease;
}

.zen-btn:hover .btn-arrow {
  transform: translateX(4px);
}

/* Professional Trust Badges */
.trust-badges-container {
  display: flex;
  gap: 1rem;
  flex-wrap: wrap;
  justify-content: center;
  margin-top: 2rem;
}

.trust-badge {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.75rem 1.25rem;
  background: rgba(255, 255, 255, 0.95);
  border-radius: 50px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
  transition: all 0.3s ease;
  backdrop-filter: blur(10px);
}

.trust-badge:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(0, 0, 0, 0.2);
  background: white;
}

.badge-icon {
  width: 16px;
  height: 16px;
  color: var(--zen-primary);
  stroke-width: 2;
}

.trust-badge span {
  font-size: 0.875rem;
  font-weight: 600;
  color: var(--zen-text-primary);
}

/* Email Popup Styles */
.zen-email-popup-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.8);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 9999;
  opacity: 0;
  visibility: hidden;
  transition: all 0.3s ease;
}

.zen-email-popup-overlay.show {
  opacity: 1;
  visibility: visible;
}

.zen-email-popup {
  position: relative;
  background: white;
  border-radius: 20px;
  max-width: 600px;
  width: 90%;
  max-height: 90vh;
  overflow: hidden;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
  transform: scale(0.8) translateY(20px);
  transition: transform 0.3s ease;
}

.zen-email-popup-overlay.show .zen-email-popup {
  transform: scale(1) translateY(0);
}

.popup-close {
  position: absolute;
  top: 1rem;
  right: 1rem;
  background: rgba(0, 0, 0, 0.5);
  border: none;
  border-radius: 50%;
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  z-index: 10;
  transition: background 0.3s ease;
}

.popup-close:hover {
  background: rgba(0, 0, 0, 0.7);
}

.popup-close svg {
  width: 20px;
  height: 20px;
  color: white;
  stroke-width: 2;
}

.popup-content {
  display: flex;
  min-height: 400px;
}

.popup-image {
  flex: 1;
  background: linear-gradient(135deg, var(--zen-primary) 0%, var(--zen-secondary) 100%);
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 2rem;
}

.popup-image img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  border-radius: 12px;
}

.popup-default-image {
  width: 120px;
  height: 120px;
  color: white;
}

.popup-default-image svg {
  width: 100%;
  height: 100%;
}

.popup-text {
  flex: 1;
  padding: 2.5rem 2rem;
  display: flex;
  flex-direction: column;
  justify-content: center;
}

.popup-headline {
  font-size: 1.75rem;
  font-weight: 700;
  color: var(--zen-text-primary);
  margin-bottom: 1rem;
  line-height: 1.3;
}

.popup-description {
  font-size: 1.1rem;
  color: var(--zen-light-text);
  margin-bottom: 2rem;
  line-height: 1.5;
}

.popup-form {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.popup-email-input {
  padding: 1rem 1.5rem;
  border: 2px solid #f0f0f0;
  border-radius: 50px;
  font-size: 1rem;
  color: var(--zen-text-primary);
  outline: none;
  transition: border-color 0.3s ease;
}

.popup-email-input:focus {
  border-color: var(--zen-primary);
}

.popup-submit-btn {
  padding: 1rem 2rem;
  border: none;
  border-radius: 50px;
  font-size: 1rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
  text-align: center;
}

.popup-submit-btn.primary {
  background: var(--zen-primary);
  color: white;
}

.popup-submit-btn.primary:hover {
  background: var(--zen-secondary);
  transform: translateY(-2px);
}

.popup-submit-btn.secondary {
  background: transparent;
  color: var(--zen-light-text);
  border: 1px solid #f0f0f0;
}

.popup-submit-btn.secondary:hover {
  background: #f0f0f0;
}

.popup-disclaimer {
  font-size: 0.8rem;
  color: var(--zen-light-text);
  text-align: center;
  margin-top: 1rem;
}

/* WhatsApp Float Button */
.zen-whatsapp-float {
  position: fixed;
  bottom: 2rem;
  right: 2rem;
  z-index: 1000;
}

.whatsapp-btn {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 1rem 1.5rem;
  background: #25D366;
  color: white;
  text-decoration: none;
  border-radius: 50px;
  box-shadow: 0 4px 20px rgba(37, 211, 102, 0.3);
  transition: all 0.3s ease;
  font-weight: 600;
}

.whatsapp-btn:hover {
  background: #20b954;
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(37, 211, 102, 0.4);
}

.whatsapp-btn svg {
  width: 24px;
  height: 24px;
}

.whatsapp-text {
  font-size: 0.9rem;
}

/* Scroll Indicator */
.zen-scroll-indicator {
  position: absolute;
  bottom: 2rem;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.5rem;
  color: var(--zen-primary);
  cursor: pointer;
  z-index: 5;
  animation: scroll-pulse 2s ease-in-out infinite;
}

.scroll-line {
  width: 2px;
  height: 40px;
  background: var(--zen-primary);
  border-radius: 2px;
  opacity: 0.5;
}

.scroll-text {
  font-size: 0.8rem;
  font-weight: 600;
}

.scroll-arrow {
  width: 16px;
  height: 16px;
  color: var(--zen-primary);
  stroke-width: 2;
  animation: scroll-bounce 2s ease-in-out infinite;
}

@keyframes scroll-pulse {
  0%, 100% { opacity: 0.5; }
  50% { opacity: 1; }
}

@keyframes scroll-bounce {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(4px); }
}

/* Mobile Responsive */
@media (max-width: 768px) {
  .zen-hero-premium { min-height: 100vh; }
  .hero-container { padding: 1.5rem 1rem; }
  
  .glass-box {
    padding: 1.5rem 2rem;
    margin: 0.5rem 0;
  }
  
  .headline-box {
    padding: 2rem 1.5rem;
  }
  
  .hero-actions { 
    flex-direction: column; 
    width: 100%;
  }
  
  .zen-btn { 
    width: 100%; 
  }
  
  .premium-trust-badges { 
    flex-direction: column; 
    align-items: center;
    gap: 0.5rem; 
  }
  
  .trust-badge { 
    width: 100%;
    justify-content: center;
    max-width: 280px;
  }

  .zen-email-popup {
    width: 95%;
    max-width: none;
  }
  
  .popup-content {
    flex-direction: column;
    min-height: auto;
  }
  
  .popup-image {
    min-height: 200px;
  }
  
  .popup-text {
    padding: 1.5rem;
  }
  
  .popup-headline {
    font-size: 1.5rem;
  }
  
  .zen-whatsapp-float {
    bottom: 1rem;
    right: 1rem;
  }
  
  .whatsapp-btn {
    padding: 0.75rem 1rem;
    gap: 0.5rem;
  }
  
  .whatsapp-text {
    display: none;
  }
}

@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}
</style>

<script>
// Email Popup Functionality
function showEmailPopup() {
  const popup = document.getElementById('emailPopup');
  if (popup) {
    popup.classList.add('show');
    document.body.style.overflow = 'hidden';
  }
}

function closeEmailPopup() {
  const popup = document.getElementById('emailPopup');
  if (popup) {
    popup.classList.remove('show');
    document.body.style.overflow = '';
    localStorage.setItem('zenEmailPopupClosed', 'true');
  }
}

function submitPopupEmail(event) {
  event.preventDefault();
  const email = event.target.querySelector('.popup-email-input').value;
  
  if (email) {
    // Here you can integrate with your email service (Klaviyo, Mailchimp, etc.)
    console.log('Email submitted:', email);
    
    // Show success message
    alert('Grazie! Riceverai presto il tuo codice sconto del 15%');
    closeEmailPopup();
    
    // Clear the form
    event.target.reset();
  }
}

// Popup trigger logic
function initEmailPopup() {
  const popup = document.getElementById('emailPopup');
  if (!popup) return;
  
  const hasClosedBefore = localStorage.getItem('zenEmailPopupClosed');
  if (hasClosedBefore) return;
  
  // Show popup when user scrolls past hero section
  let triggered = false;
  const heroSection = document.querySelector('.zen-hero-premium');
  
  if (heroSection) {
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (!entry.isIntersecting && !triggered) {
          triggered = true;
          setTimeout(() => {
            showEmailPopup();
          }, 1000); // 1 second delay after leaving hero
        }
      });
    }, { threshold: 0.1 });
    
    observer.observe(heroSection);
  }
  
  // Alternative: Show after 30 seconds if still on page
  setTimeout(() => {
    if (!triggered && !hasClosedBefore) {
      showEmailPopup();
    }
  }, 30000);
}

// Close popup when clicking outside
document.addEventListener('click', function(event) {
  const popup = document.getElementById('emailPopup');
  if (popup && popup.classList.contains('show')) {
    if (event.target === popup) {
      closeEmailPopup();
    }
  }
});

// Close popup with Escape key
document.addEventListener('keydown', function(event) {
  if (event.key === 'Escape') {
    closeEmailPopup();
  }
});

// Initialize when DOM is loaded
document.addEventListener('DOMContentLoaded', function() {
  initEmailPopup();
  
  // Initialize other interactive elements
  const scrollIndicator = document.querySelector('.zen-scroll-indicator');
  if (scrollIndicator) {
    scrollIndicator.addEventListener('click', () => {
      window.scrollTo({
        top: window.innerHeight,
        behavior: 'smooth'
      });
    });
  }
  
  // Animate trust badges on scroll
  const observerOptions = {
    threshold: 0.1,
    rootMargin: '0px 0px -50px 0px'
  };

  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.style.opacity = '1';
        entry.target.style.transform = 'translateY(0)';
      }
    });
  }, observerOptions);

  document.querySelectorAll('.trust-badge').forEach((badge, index) => {
    badge.style.opacity = '0';
    badge.style.transform = 'translateY(20px)';
    badge.style.transition = `all 0.6s ease ${index * 0.1}s`;
    observer.observe(badge);
  });
});
</script>

{% schema %}
{
  "name": "Premium Zen Hero",
  "settings": [
    {
      "type": "select",
      "id": "height",
      "label": "Hero Height",
      "options": [
        {"value": "small", "label": "Small (70vh)"},
        {"value": "medium", "label": "Medium (85vh)"},
        {"value": "large", "label": "Large (100vh)"}
      ],
      "default": "large"
    },
    {
      "type": "header",
      "content": "Background"
    },
    {
      "type": "url",
      "id": "background_gif",
      "label": "Background GIF URL (for zen incense effect)",
      "info": "Use a GIF URL for animated backgrounds like incense smoke. Default: zen incense"
    },
    {
      "type": "image_picker",
      "id": "background_image",
      "label": "Background Image (fallback)"
    },
    {
      "type": "url",
      "id": "background_video",
      "label": "Background Video URL (MP4)"
    },
    {
      "type": "range",
      "id": "overlay_opacity",
      "min": 0,
      "max": 100,
      "step": 10,
      "unit": "%",
      "label": "Overlay Opacity",
      "default": 30
    },
    {
      "type": "header",
      "content": "Content"
    },
    {
      "type": "text",
      "id": "headline",
      "label": "Headline",
      "default": "Il tuo viaggio verso una bellezza naturale inizia qui"
    },
    {
      "type": "textarea",
      "id": "subheadline",
      "label": "Subheadline",
      "default": "Scopri prodotti premium naturali e autentici per la bellezza."
    },
    {
      "type": "header",
      "content": "Buttons"
    },
    {
      "type": "checkbox",
      "id": "show_cta_buttons",
      "label": "Show CTA Buttons",
      "default": true
    },
    {
      "type": "text",
      "id": "primary_button_text",
      "label": "Primary Button Text",
      "default": "Esplora la Collezione"
    },
    {
      "type": "url",
      "id": "primary_button_link",
      "label": "Primary Button Link"
    },
    {
      "type": "text",
      "id": "secondary_button_text",
      "label": "Secondary Button Text",
      "default": "Scopri la Storia"
    },
    {
      "type": "url", 
      "id": "secondary_button_link",
      "label": "Secondary Button Link"
    },
    {
      "type": "header",
      "content": "Elements"
    },
    {
      "type": "checkbox",
      "id": "show_trust_badges",
      "label": "Show Trust Badges",
      "default": true
    },
    {
      "type": "checkbox", 
      "id": "show_scroll_indicator",
      "label": "Show Scroll Indicator",
      "default": true
    },
    {
      "type": "header",
      "content": "Email Popup"
    },
    {
      "type": "checkbox",
      "id": "show_email_popup",
      "label": "Show Email Popup",
      "default": true
    },
    {
      "type": "image_picker",
      "id": "popup_image",
      "label": "Popup Image"
    },
    {
      "type": "text",
      "id": "popup_headline",
      "label": "Popup Headline",
      "default": "Vuoi ricevere un regalo?"
    },
    {
      "type": "textarea",
      "id": "popup_description",
      "label": "Popup Description",
      "default": "Ottieni il 15% di sconto sul tuo primo ordine + spedizione gratuita"
    },
    {
      "type": "text",
      "id": "popup_email_placeholder",
      "label": "Email Placeholder",
      "default": "La tua email"
    },
    {
      "type": "text",
      "id": "popup_button_text",
      "label": "Accept Button Text",
      "default": "Sì, lo voglio!"
    },
    {
      "type": "text",
      "id": "popup_decline_text",
      "label": "Decline Button Text",
      "default": "No, grazie"
    },
    {
      "type": "text",
      "id": "popup_disclaimer",
      "label": "Popup Disclaimer (Optional)"
    },
    {
      "type": "header",
      "content": "WhatsApp Chat"
    },
    {
      "type": "checkbox",
      "id": "show_whatsapp_button",
      "label": "Show WhatsApp Button",
      "default": false
    },
    {
      "type": "text",
      "id": "whatsapp_number",
      "label": "WhatsApp Number",
      "info": "Include country code, e.g., +393123456789"
    },
    {
      "type": "text",
      "id": "whatsapp_message",
      "label": "Default WhatsApp Message",
      "default": "Ciao! Sono interessato ai vostri prodotti naturali."
    }
  ],
  "presets": [
    {
      "name": "Premium Zen Hero",
      "category": "Hero"
    }
  ]
}
{% endschema %}