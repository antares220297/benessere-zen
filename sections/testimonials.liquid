{% comment %}
  Complete Zen Testimonials Section for Shopify
  BenesserZen.shop Compatible Design
  All CSS and JavaScript included
{% endcomment %}

<style>
  :root {
    /* Heart Chakra - Light Green Theme */
    --zen-primary-green: #4A7C59;
    --zen-accent-green: #68B984;
    --zen-light-green: #A8D5BA;
    --zen-bg-green: #F0F8F4;
    --zen-text-gray: #6B7280;
    --zen-white: #FFFFFF;
  }

  .zen-testimonials-{{ section.id }} {
    background: linear-gradient(135deg, var(--zen-bg-green) 0%, var(--zen-white) 100%);
    position: relative;
    overflow: hidden;
    font-family: 'Noto Sans Japanese', -apple-system, BlinkMacSystemFont, sans-serif;
    padding: 3rem 0 5rem;
  }

  .zen-testimonials-{{ section.id }}::before {
    content: '';
    position: absolute;
    inset: 0;
    background: 
      radial-gradient(circle at 20% 80%, rgba(168, 213, 186, 0.08) 0%, transparent 50%),
      radial-gradient(circle at 80% 20%, rgba(104, 185, 132, 0.05) 0%, transparent 50%);
    pointer-events: none;
  }

  .zen-testimonials-{{ section.id }} .zen-heading {
  font-family: 'Noto Sans', -apple-system, BlinkMacSystemFont, sans-serif;
  font-size: clamp(32px, 5vw, 48px);
  font-weight: 500;
  line-height: 1.2;
  margin-bottom: 20px;
  color: var(--zen-primary-green) !important;
  text-align: center !important;   /* centra il titolo */
  display: block;
  margin-left: auto;
  margin-right: auto;
}

  .zen-testimonials-{{ section.id }} .zen-subtitle {
    font-size: 1.125rem;
    color: var(--zen-text-gray);
    line-height: 1.5;
    margin-bottom: 1.5rem;
    max-width: 42rem;
    margin-left: auto;
    margin-right: auto;
    text-align: center;
  }

  .zen-testimonials-{{ section.id }} .zen-heart-icon {
    display: flex;
    justify-content: center;
    margin: 1rem auto 2rem;
    opacity: 0.3;
    color: var(--zen-accent-green);
  }

  .zen-testimonials-{{ section.id }} .zen-heart-icon svg {
    width: 2rem;
    height: 2rem;
    animation: gentle-pulse 4s infinite;
  }

  .zen-testimonials-{{ section.id }} .zen-divider {
    width: 80px;
    height: 4px;
    background: linear-gradient(to right, var(--zen-accent-green), var(--zen-light-green));
    margin: 0 auto 3rem;
    border-radius: 999px;
    animation: glow-line 3s infinite;
  }

  @keyframes gentle-pulse {
    0%, 100% { 
      opacity: 0.2; 
      transform: scale(1);
    }
    50% { 
      opacity: 0.4; 
      transform: scale(1.05);
    }
  }

  @keyframes glow-line {
    0%, 100% { 
      opacity: 0.8; 
      width: 80px; 
      box-shadow: 0 0 20px rgba(104, 185, 132, 0.3); 
    }
    50% { 
      opacity: 1; 
      width: 120px; 
      box-shadow: 0 0 30px rgba(104, 185, 132, 0.3); 
    }
  }

  .zen-testimonials-{{ section.id }} .zen-card {
    background: rgba(255, 255, 255, 0.95);
    border: 1px solid rgba(104, 185, 132, 0.2);
    border-radius: 24px;
    backdrop-filter: blur(10px);
    box-shadow: 0 8px 32px rgba(104, 185, 132, 0.15);
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    padding: 2rem;
    height: 100%;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    min-height: 320px;
  }

  .zen-testimonials-{{ section.id }} .zen-card:hover {
    transform: translateY(-8px);
    border-color: rgba(104, 185, 132, 0.4);
    box-shadow: 0 12px 40px rgba(104, 185, 132, 0.25);
  }

  .zen-testimonials-{{ section.id }} .zen-testimonial-text {
    font-size: 1.125rem;
    color: var(--zen-primary-green);
    line-height: 1.6;
    font-weight: 400;
    opacity: 0.9;
    margin-bottom: 1.5rem;
    position: relative;
  }

  .zen-testimonials-{{ section.id }} .zen-quote-icon {
    color: var(--zen-accent-green);
    opacity: 0.6;
    font-family: Georgia, 'Times New Roman', serif;
    position: absolute;
  }

  .zen-testimonials-{{ section.id }} .zen-author-text {
    color: var(--zen-primary-green);
    font-size: 0.875rem;
  }

  .zen-testimonials-{{ section.id }} .zen-star {
    color: var(--zen-accent-green);
    width: 1.25rem;
    height: 1.25rem;
  }

  .zen-testimonials-{{ section.id }} .zen-carousel-btn {
    background: rgba(255, 255, 255, 0.95);
    border: 1px solid rgba(104, 185, 132, 0.2);
    color: var(--zen-primary-green);
    border-radius: 50%;
    backdrop-filter: blur(10px);
    box-shadow: 0 4px 20px rgba(104, 185, 132, 0.15);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    width: 3rem;
    height: 3rem;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
  }

  .zen-testimonials-{{ section.id }} .zen-carousel-btn:hover {
    background: linear-gradient(135deg, var(--zen-accent-green), var(--zen-light-green));
    color: white;
    transform: scale(1.05);
    border-color: var(--zen-accent-green);
    box-shadow: 0 8px 30px rgba(104, 185, 132, 0.3);
  }

  .zen-testimonials-{{ section.id }} .zen-carousel-btn:disabled {
    opacity: 0.3;
    cursor: not-allowed;
  }

  .zen-testimonials-{{ section.id }} .zen-pagination-dot {
    background: rgba(104, 185, 132, 0.3);
    transition: all 0.3s ease;
    border-radius: 50%;
    box-shadow: 0 2px 8px rgba(104, 185, 132, 0.2);
    width: 0.75rem;
    height: 0.75rem;
    border: none;
    cursor: pointer;
    margin: 0 0.375rem;
  }

  .zen-testimonials-{{ section.id }} .zen-pagination-dot.active {
    background: linear-gradient(135deg, var(--zen-accent-green), var(--zen-light-green));
    transform: scale(1.2);
    box-shadow: 0 4px 12px rgba(104, 185, 132, 0.4);
  }

  .zen-testimonials-{{ section.id }} .zen-carousel-nav {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    left: -60px;
    right: -60px;
    width: calc(100% + 120px);
    display: flex;
    justify-content: space-between;
    align-items: center;
    pointer-events: none;
  }

  .zen-testimonials-{{ section.id }} .zen-carousel-nav button {
    pointer-events: auto;
  }

  .zen-testimonials-{{ section.id }} .zen-carousel-track {
    overflow: hidden;
    border-radius: 24px;
  }

  .zen-testimonials-{{ section.id }} .zen-carousel-slides {
    display: flex;
    transition: transform 0.7s ease-out;
  }

  .zen-testimonials-{{ section.id }} .zen-slide {
    flex-shrink: 0;
    width: 100%;
    padding: 0 0.75rem;
  }

  .zen-testimonials-{{ section.id }} .zen-pagination {
    display: flex;
    justify-content: center;
    margin-top: 2rem;
  }

  .zen-testimonials-{{ section.id }} .zen-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 1rem;
    position: relative;
  }

  .zen-testimonials-{{ section.id }} .zen-rating {
    display: flex;
    justify-content: center;
    margin-bottom: 1rem;
    gap: 0.25rem;
  }

  .zen-testimonials-{{ section.id }} .zen-author-footer {
    display: flex;
    align-items: center;
    justify-content: center;
    margin-top: 1.5rem;
    padding-top: 1.5rem;
    border-top: 1px solid;
    border-color: currentColor;
    opacity: 0.3;
    text-align: center;
  }

  /* Screen reader only class */
  .sr-only {
    position: absolute !important;
    width: 1px !important;
    height: 1px !important;
    padding: 0 !important;
    margin: -1px !important;
    overflow: hidden !important;
    clip: rect(0, 0, 0, 0) !important;
    white-space: nowrap !important;
    border: 0 !important;
  }

  /* Responsive Design */
  @media (min-width: 768px) {
    .zen-testimonials-{{ section.id }} .zen-heading {
      font-size: 3rem;
    }
    
    .zen-testimonials-{{ section.id }} .zen-slide {
      width: 50%;
    }

    .zen-testimonials-{{ section.id }} .zen-container {
      padding: 0 2rem;
    }
  }

  @media (min-width: 1024px) {
    .zen-testimonials-{{ section.id }} .zen-slide {
      width: 33.333333%;
    }
  }

  /* Reduced motion preferences */
  @media (prefers-reduced-motion: reduce) {
    .zen-testimonials-{{ section.id }} .zen-carousel-slides {
      transition: none !important;
    }
    
    .zen-testimonials-{{ section.id }} .zen-card {
      transition: none !important;
    }
    
    @keyframes glow-line {
      0%, 100% { opacity: 0.8; width: 80px; }
    }
  }
</style>

<section 
  class="zen-testimonials-{{ section.id }}"
  aria-label="Customer Testimonials"
>
  <div class="zen-container">
    
    <!-- Header -->
    {% if section.settings.heading != blank %}
      <header>
        <h2 class="zen-heading">{{ section.settings.heading }}</h2>
        
        {% if section.settings.subheading != blank %}
          <p class="zen-subtitle">{{ section.settings.subheading }}</p>
        {% endif %}
        
        <!-- Heart Chakra Icon -->
        <div class="zen-heart-icon">
          <svg fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
          </svg>
        </div>
        
        <div class="zen-divider"></div>
      </header>
    {% endif %}

    <!-- Carousel Container -->
    <div 
      class="zen-carousel-container"
      data-zen-testimonials
      data-total-slides="{% if section.blocks.size > 0 %}{{ section.blocks.size }}{% else %}10{% endif %}"
    >
      <!-- Carousel Track -->
      <div class="zen-carousel-track">
        <div class="zen-carousel-slides" data-zen-slides>
          
          {% if section.blocks.size > 0 %}
            {% for block in section.blocks %}
              <div class="zen-slide">
                <article class="zen-card">
                  <div style="flex-grow: 1;">
                    {% if block.settings.quote != blank %}
                      <blockquote class="zen-testimonial-text">
                        <span class="zen-quote-icon" style="top: -0.5rem; left: -0.25rem; font-size: 2rem;">"</span>
                        <span style="display: block; padding-left: 1.5rem;">{{ block.settings.quote }}</span>
                        <span class="zen-quote-icon" style="bottom: -1rem; right: 0; font-size: 2rem; transform: rotate(180deg);">"</span>
                      </blockquote>
                    {% endif %}

                    <!-- Star Rating -->
                    {% if block.settings.rating and block.settings.rating > 0 %}
                      <div class="zen-rating" aria-label="Rating: {{ block.settings.rating }} out of 5 stars">
                        {% for i in (1..5) %}
                          <svg 
                            class="zen-star {% if i <= block.settings.rating %}zen-star{% else %}text-gray-300{% endif %}"
                            fill="currentColor" 
                            viewBox="0 0 20 20"
                            aria-hidden="true"
                          >
                            <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                          </svg>
                        {% endfor %}
                      </div>
                    {% endif %}
                  </div>

                  <!-- Author -->
                  {% if block.settings.author_name != blank %}
                    <footer class="zen-author-footer">
                      <div>
                        <cite class="zen-author-text" style="font-weight: 600; opacity: 1; display: block;">
                          {{ block.settings.author_name }}
                        </cite>
                        {% if block.settings.author_title != blank %}
                          <p class="zen-author-text" style="font-size: 0.75rem; margin-top: 0.25rem; opacity: 0.8;">
                            {{ block.settings.author_title }}
                          </p>
                        {% endif %}
                      </div>
                    </footer>
                  {% endif %}
                </article>
              </div>
            {% endfor %}
          {% else %}
            <!-- Default testimonials when no blocks are configured -->
            <div class="zen-slide">
              <article class="zen-card">
                <div style="flex-grow: 1;">
                  <blockquote class="zen-testimonial-text">
                    <span class="zen-quote-icon" style="top: -0.5rem; left: -0.25rem; font-size: 2rem;">"</span>
                    <span style="display: block; padding-left: 1.5rem;">Ho preso la crema viso lenitiva e mamma mia che freschezza!! Soprattutto con questi caldi estivi √® un toccasana.</span>
                    <span class="zen-quote-icon" style="bottom: -1rem; right: 0; font-size: 2rem; transform: rotate(180deg);">"</span>
                  </blockquote>
                  <div class="zen-rating" aria-label="Rating: 5 out of 5 stars">
                    {% for i in (1..5) %}
                      <svg class="zen-star" fill="currentColor" viewBox="0 0 20 20" aria-hidden="true">
                        <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                      </svg>
                    {% endfor %}
                  </div>
                </div>
                <footer class="zen-author-footer">
                  <div>
                    <cite class="zen-author-text" style="font-weight: 600; opacity: 1; display: block;">Alice P.</cite>
                    <p class="zen-author-text" style="font-size: 0.75rem; margin-top: 0.25rem; opacity: 0.8;">Cliente Verificata, Arezzo (AR)</p>
                  </div>
                </footer>
              </article>
            </div>

            <div class="zen-slide">
              <article class="zen-card">
                <div style="flex-grow: 1;">
                  <blockquote class="zen-testimonial-text">
                    <span class="zen-quote-icon" style="top: -0.5rem; left: -0.25rem; font-size: 2rem;">"</span>
                    <span style="display: block; padding-left: 1.5rem;">Arrivato il pacco in due giorni, ben imballato. Ho preso il bracciale con le pietre, molto bello, le pietre sono fredde al tatto. Mia nipote gi√† me lo vuole rubare üòÇ</span>
                    <span class="zen-quote-icon" style="bottom: -1rem; right: 0; font-size: 2rem; transform: rotate(180deg);">"</span>
                  </blockquote>
                  <div class="zen-rating" aria-label="Rating: 5 out of 5 stars">
                    {% for i in (1..5) %}
                      <svg class="zen-star" fill="currentColor" viewBox="0 0 20 20" aria-hidden="true">
                        <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                      </svg>
                    {% endfor %}
                  </div>
                </div>
                <footer class="zen-author-footer">
                  <div>
                    <cite class="zen-author-text" style="font-weight: 600; opacity: 1; display: block;">Loredana G.</cite>
                    <p class="zen-author-text" style="font-size: 0.75rem; margin-top: 0.25rem; opacity: 0.8;">Cliente Verificata, Seregno (MB)</p>
                  </div>
                </footer>
              </article>
            </div>

            <div class="zen-slide">
              <article class="zen-card">
                <div style="flex-grow: 1;">
                  <blockquote class="zen-testimonial-text">
                    <span class="zen-quote-icon" style="top: -0.5rem; left: -0.25rem; font-size: 2rem;">"</span>
                    <span style="display: block; padding-left: 1.5rem;">Devo dire che non sono uno che compra online, ma qui mi sono fidato e ho fatto bene. La tisana √® buonissima, non serve zucchero, e mi sento pi√π leggero dopo cena.</span>
                    <span class="zen-quote-icon" style="bottom: -1rem; right: 0; font-size: 2rem; transform: rotate(180deg);">"</span>
                  </blockquote>
                  <div class="zen-rating" aria-label="Rating: 5 out of 5 stars">
                    {% for i in (1..5) %}
                      <svg class="zen-star" fill="currentColor" viewBox="0 0 20 20" aria-hidden="true">
                        <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                      </svg>
                    {% endfor %}
                  </div>
                </div>
                <footer class="zen-author-footer">
                  <div>
                    <cite class="zen-author-text" style="font-weight: 600; opacity: 1; display: block;">Antonio C.</cite>
                    <p class="zen-author-text" style="font-size: 0.75rem; margin-top: 0.25rem; opacity: 0.8;">Cliente Verificato, Fano (PU)</p>
                  </div>
                </footer>
              </article>
            </div>

            <div class="zen-slide">
              <article class="zen-card">
                <div style="flex-grow: 1;">
                  <blockquote class="zen-testimonial-text">
                    <span class="zen-quote-icon" style="top: -0.5rem; left: -0.25rem; font-size: 2rem;">"</span>
                    <span style="display: block; padding-left: 1.5rem;">Ho preso il ciondolo di ametista, bello lucente e non quei plasticoni che vendono in giro. Mia moglie contentissima, quindi ho fatto centro!</span>
                    <span class="zen-quote-icon" style="bottom: -1rem; right: 0; font-size: 2rem; transform: rotate(180deg);">"</span>
                  </blockquote>
                  <div class="zen-rating" aria-label="Rating: 5 out of 5 stars">
                    {% for i in (1..5) %}
                      <svg class="zen-star" fill="currentColor" viewBox="0 0 20 20" aria-hidden="true">
                        <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                      </svg>
                    {% endfor %}
                  </div>
                </div>
                <footer class="zen-author-footer">
                  <div>
                    <cite class="zen-author-text" style="font-weight: 600; opacity: 1; display: block;">Carla M.</cite>
                    <p class="zen-author-text" style="font-size: 0.75rem; margin-top: 0.25rem; opacity: 0.8;">Cliente Verificata, Bitonto (BA)</p>
                  </div>
                </footer>
              </article>
            </div>

            <div class="zen-slide">
              <article class="zen-card">
                <div style="flex-grow: 1;">
                  <blockquote class="zen-testimonial-text">
                    <span class="zen-quote-icon" style="top: -0.5rem; left: -0.25rem; font-size: 2rem;">"</span>
                    <span style="display: block; padding-left: 1.5rem;">Buon prodotto. Uso la crema mani tutte le sere e la pelle non mi tira pi√π. Consiglio di usarla poco alla volta che √® bella corposa.</span>
                    <span class="zen-quote-icon" style="bottom: -1rem; right: 0; font-size: 2rem; transform: rotate(180deg);">"</span>
                  </blockquote>
                  <div class="zen-rating" aria-label="Rating: 4 out of 5 stars">
                    {% for i in (1..5) %}
                      <svg class="zen-star {% if i <= 4 %}zen-star{% else %}text-gray-300{% endif %}" fill="currentColor" viewBox="0 0 20 20" aria-hidden="true">
                        <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                      </svg>
                    {% endfor %}
                  </div>
                </div>
                <footer class="zen-author-footer">
                  <div>
                    <cite class="zen-author-text" style="font-weight: 600; opacity: 1; display: block;">Marta F.</cite>
                    <p class="zen-author-text" style="font-size: 0.75rem; margin-top: 0.25rem; opacity: 0.8;">Cliente Verificata, Caltagirone (CT)</p>
                  </div>
                </footer>
              </article>
            </div>

            <div class="zen-slide">
              <article class="zen-card">
                <div style="flex-grow: 1;">
                  <blockquote class="zen-testimonial-text">
                    <span class="zen-quote-icon" style="top: -0.5rem; left: -0.25rem; font-size: 2rem;">"</span>
                    <span style="display: block; padding-left: 1.5rem;">Pacco arrivato un po' in ritardo per colpa del corriere ma il servizio clienti molto gentile. Ho preso un set di incensi e la confezione era davvero elegante.</span>
                    <span class="zen-quote-icon" style="bottom: -1rem; right: 0; font-size: 2rem; transform: rotate(180deg);">"</span>
                  </blockquote>
                  <div class="zen-rating" aria-label="Rating: 4 out of 5 stars">
                    {% for i in (1..5) %}
                      <svg class="zen-star {% if i <= 4 %}zen-star{% else %}text-gray-300{% endif %}" fill="currentColor" viewBox="0 0 20 20" aria-hidden="true">
                        <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                      </svg>
                    {% endfor %}
                  </div>
                </div>
                <footer class="zen-author-footer">
                  <div>
                    <cite class="zen-author-text" style="font-weight: 600; opacity: 1; display: block;">Paola T.</cite>
                    <p class="zen-author-text" style="font-size: 0.75rem; margin-top: 0.25rem; opacity: 0.8;">Cliente Verificata, Conegliano (TV)</p>
                  </div>
                </footer>
              </article>
            </div>

            <div class="zen-slide">
              <article class="zen-card">
                <div style="flex-grow: 1;">
                  <blockquote class="zen-testimonial-text">
                    <span class="zen-quote-icon" style="top: -0.5rem; left: -0.25rem; font-size: 2rem;">"</span>
                    <span style="display: block; padding-left: 1.5rem;">Il sapone artigianale dura un sacco e profuma tutta la stanza. Lo metto pure nei cassetti come faceva mia nonna. Consigliato.</span>
                    <span class="zen-quote-icon" style="bottom: -1rem; right: 0; font-size: 2rem; transform: rotate(180deg);">"</span>
                  </blockquote>
                  <div class="zen-rating" aria-label="Rating: 5 out of 5 stars">
                    {% for i in (1..5) %}
                      <svg class="zen-star" fill="currentColor" viewBox="0 0 20 20" aria-hidden="true">
                        <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                      </svg>
                    {% endfor %}
                  </div>
                </div>
                <footer class="zen-author-footer">
                  <div>
                    <cite class="zen-author-text" style="font-weight: 600; opacity: 1; display: block;">Giuliana B.</cite>
                    <p class="zen-author-text" style="font-size: 0.75rem; margin-top: 0.25rem; opacity: 0.8;">Cliente Verificata, Vercelli (VC)</p>
                  </div>
                </footer>
              </article>
            </div>

            <div class="zen-slide">
              <article class="zen-card">
                <div style="flex-grow: 1;">
                  <blockquote class="zen-testimonial-text">
                    <span class="zen-quote-icon" style="top: -0.5rem; left: -0.25rem; font-size: 2rem;">"</span>
                    <span style="display: block; padding-left: 1.5rem;">Comprato l'olio essenziale di eucalipto, finalmente respiro meglio la notte. Io lo metto pure nel deumidificatore, fa un profumo in casa che √® una meraviglia.</span>
                    <span class="zen-quote-icon" style="bottom: -1rem; right: 0; font-size: 2rem; transform: rotate(180deg);">"</span>
                  </blockquote>
                  <div class="zen-rating" aria-label="Rating: 5 out of 5 stars">
                    {% for i in (1..5) %}
                      <svg class="zen-star" fill="currentColor" viewBox="0 0 20 20" aria-hidden="true">
                        <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                      </svg>
                    {% endfor %}
                  </div>
                </div>
                <footer class="zen-author-footer">
                  <div>
                    <cite class="zen-author-text" style="font-weight: 600; opacity: 1; display: block;">Enrico V.</cite>
                    <p class="zen-author-text" style="font-size: 0.75rem; margin-top: 0.25rem; opacity: 0.8;">Cliente Verificato, Bressanone (BZ)</p>
                  </div>
                </footer>
              </article>
            </div>

            <div class="zen-slide">
              <article class="zen-card">
                <div style="flex-grow: 1;">
                  <blockquote class="zen-testimonial-text">
                    <span class="zen-quote-icon" style="top: -0.5rem; left: -0.25rem; font-size: 2rem;">"</span>
                    <span style="display: block; padding-left: 1.5rem;">Bella esperienza d'acquisto. Ho preso tre cose diverse e sono arrivate tutte ben confezionate. Non capita spesso di trovare negozi cos√¨ attenti.</span>
                    <span class="zen-quote-icon" style="bottom: -1rem; right: 0; font-size: 2rem; transform: rotate(180deg);">"</span>
                  </blockquote>
                  <div class="zen-rating" aria-label="Rating: 5 out of 5 stars">
                    {% for i in (1..5) %}
                      <svg class="zen-star" fill="currentColor" viewBox="0 0 20 20" aria-hidden="true">
                        <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                      </svg>
                    {% endfor %}
                  </div>
                </div>
                <footer class="zen-author-footer">
                  <div>
                    <cite class="zen-author-text" style="font-weight: 600; opacity: 1; display: block;">Simona L.</cite>
                    <p class="zen-author-text" style="font-size: 0.75rem; margin-top: 0.25rem; opacity: 0.8;">Cliente Verificata, Pisticci (MT)</p>
                  </div>
                </footer>
              </article>
            </div>

            <div class="zen-slide">
              <article class="zen-card">
                <div style="flex-grow: 1;">
                  <blockquote class="zen-testimonial-text">
                    <span class="zen-quote-icon" style="top: -0.5rem; left: -0.25rem; font-size: 2rem;">"</span>
                    <span style="display: block; padding-left: 1.5rem;">Il bracciale con pietre dei chakra √® bellissimo, i colori sono vivi. Io non ci credo tanto a queste cose ma devo dire che da quando lo porto mi sento pi√π tranquilla.</span>
                    <span class="zen-quote-icon" style="bottom: -1rem; right: 0; font-size: 2rem; transform: rotate(180deg);">"</span>
                  </blockquote>
                  <div class="zen-rating" aria-label="Rating: 5 out of 5 stars">
                    {% for i in (1..5) %}
                      <svg class="zen-star" fill="currentColor" viewBox="0 0 20 20" aria-hidden="true">
                        <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                      </svg>
                    {% endfor %}
                  </div>
                </div>
                <footer class="zen-author-footer">
                  <div>
                    <cite class="zen-author-text" style="font-weight: 600; opacity: 1; display: block;">Francesco D.</cite>
                    <p class="zen-author-text" style="font-size: 0.75rem; margin-top: 0.25rem; opacity: 0.8;">Cliente Verificato, Asti (AT)</p>
                  </div>
                </footer>
              </article>
            </div>
          {% endif %}

        </div>
      </div>

      <!-- Navigation Arrows -->
      {% if section.settings.show_arrows and section.blocks.size > 1 %}
        <div class="zen-carousel-nav">
          <button 
            class="zen-carousel-btn"
            data-zen-prev
            aria-label="Previous testimonial"
          >
            <svg style="width: 1.25rem; height: 1.25rem;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
            </svg>
          </button>
          
          <button 
            class="zen-carousel-btn"
            data-zen-next
            aria-label="Next testimonial"
          >
            <svg style="width: 1.25rem; height: 1.25rem;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
            </svg>
          </button>
        </div>
      {% endif %}

      <!-- Pagination Dots -->
      {% if section.settings.show_pagination and section.blocks.size > 1 %}
        <div class="zen-pagination" data-zen-pagination>
          {% for i in (1..section.blocks.size) %}
            <button 
              class="zen-pagination-dot"
              data-zen-dot="{{ forloop.index0 }}"
              aria-label="Go to testimonial {{ forloop.index }}"
            ></button>
          {% endfor %}
        </div>
      {% endif %}
    </div>

  </div>
</section>

<script>
/**
 * Complete Zen Testimonials JavaScript
 * Vanilla JavaScript - No Alpine.js required
 */
(function() {
  'use strict';

  class ZenTestimonials {
    constructor(container) {
      this.container = container;
      this.slidesContainer = container.querySelector('[data-zen-slides]');
      this.totalSlides = parseInt(container.dataset.totalSlides) || 10;
      this.currentSlide = 0;
      this.visibleSlides = 1;
      this.touchStartX = 0;
      this.touchEndX = 0;
      
      this.init();
    }

    init() {
      if (this.totalSlides <= 1) return;

      this.calculateVisibleSlides();
      this.setupEventListeners();
      this.updateSlidePosition();
      this.updatePagination();
      this.updateArrows();
    }

    calculateVisibleSlides() {
      if (window.innerWidth >= 1024) {
        this.visibleSlides = Math.min(3, this.totalSlides);
      } else if (window.innerWidth >= 768) {
        this.visibleSlides = Math.min(2, this.totalSlides);
      } else {
        this.visibleSlides = 1;
      }
    }

    get maxSlide() {
      return Math.max(0, this.totalSlides - this.visibleSlides);
    }

    setupEventListeners() {
      // Previous button
      const prevBtn = this.container.querySelector('[data-zen-prev]');
      if (prevBtn) {
        prevBtn.addEventListener('click', () => this.prevSlide());
      }

      // Next button
      const nextBtn = this.container.querySelector('[data-zen-next]');
      if (nextBtn) {
        nextBtn.addEventListener('click', () => this.nextSlide());
      }

      // Pagination dots
      const dots = this.container.querySelectorAll('[data-zen-dot]');
      dots.forEach(dot => {
        dot.addEventListener('click', (e) => {
          const slideIndex = parseInt(e.target.dataset.zenDot);
          this.goToSlide(slideIndex);
        });
      });

      // Touch events
      this.container.addEventListener('touchstart', (e) => {
        this.touchStartX = e.changedTouches[0].screenX;
      }, { passive: true });

      this.container.addEventListener('touchend', (e) => {
        this.touchEndX = e.changedTouches[0].screenX;
        this.handleSwipe();
      }, { passive: true });

      // Keyboard events
      this.container.addEventListener('keydown', (e) => {
        switch (e.key) {
          case 'ArrowLeft':
            e.preventDefault();
            this.prevSlide();
            break;
          case 'ArrowRight':
            e.preventDefault();
            this.nextSlide();
            break;
          case 'Home':
            e.preventDefault();
            this.goToSlide(0);
            break;
          case 'End':
            e.preventDefault();
            this.goToSlide(this.maxSlide);
            break;
        }
      });

      // Resize events
      window.addEventListener('resize', () => {
        this.handleResize();
      });
    }

    nextSlide() {
      if (this.currentSlide < this.maxSlide) {
        this.currentSlide++;
      } else {
        this.currentSlide = 0;
      }
      this.updateSlidePosition();
      this.updatePagination();
      this.updateArrows();
      this.announceSlideChange();
    }

    prevSlide() {
      if (this.currentSlide > 0) {
        this.currentSlide--;
      } else {
        this.currentSlide = this.maxSlide;
      }
      this.updateSlidePosition();
      this.updatePagination();
      this.updateArrows();
      this.announceSlideChange();
    }

    goToSlide(index) {
      if (index >= 0 && index <= this.maxSlide) {
        this.currentSlide = index;
        this.updateSlidePosition();
        this.updatePagination();
        this.updateArrows();
        this.announceSlideChange();
      }
    }

    updateSlidePosition() {
      if (this.slidesContainer) {
        const translateX = -(this.currentSlide * (100 / this.visibleSlides));
        this.slidesContainer.style.transform = `translateX(${translateX}%)`;
      }
    }

    updatePagination() {
      const dots = this.container.querySelectorAll('[data-zen-dot]');
      dots.forEach((dot, index) => {
        if (index === this.currentSlide) {
          dot.classList.add('active');
        } else {
          dot.classList.remove('active');
        }
      });
    }

    updateArrows() {
      const prevBtn = this.container.querySelector('[data-zen-prev]');
      const nextBtn = this.container.querySelector('[data-zen-next]');

      if (prevBtn) {
        prevBtn.disabled = this.currentSlide === 0;
      }

      if (nextBtn) {
        nextBtn.disabled = this.currentSlide >= this.maxSlide;
      }
    }

    handleSwipe() {
      const swipeThreshold = 50;
      const diff = this.touchStartX - this.touchEndX;

      if (Math.abs(diff) > swipeThreshold) {
        if (diff > 0) {
          this.nextSlide();
        } else {
          this.prevSlide();
        }
      }
    }

    handleResize() {
      this.calculateVisibleSlides();
      if (this.currentSlide > this.maxSlide) {
        this.currentSlide = this.maxSlide;
      }
      this.updateSlidePosition();
      this.updatePagination();
      this.updateArrows();
    }

    announceSlideChange() {
      const announcement = `Showing testimonial ${this.currentSlide + 1} of ${this.totalSlides}`;
      this.announceToScreenReader(announcement);
    }

    announceToScreenReader(message) {
      const announcement = document.createElement('div');
      announcement.setAttribute('aria-live', 'polite');
      announcement.setAttribute('aria-atomic', 'true');
      announcement.classList.add('sr-only');
      announcement.textContent = message;
      
      document.body.appendChild(announcement);
      setTimeout(() => {
        if (document.body.contains(announcement)) {
          document.body.removeChild(announcement);
        }
      }, 1000);
    }
  }

  // Initialize all testimonial carousels
  function initZenTestimonials() {
    const containers = document.querySelectorAll('[data-zen-testimonials]');
    containers.forEach(container => {
      new ZenTestimonials(container);
    });
  }

  // Initialize when DOM is ready
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initZenTestimonials);
  } else {
    initZenTestimonials();
  }

  // Re-initialize on theme editor updates
  document.addEventListener('shopify:section:load', initZenTestimonials);
})();
</script>

{% schema %}
{"name":"Zen Testimonials","tag":"section","class":"section-zen-testimonials","settings":[{"type":"header","content":"Content Settings"},{"type":"text","id":"heading","label":"Section Heading","default":"Cosa Dicono i Nostri Clienti"},{"type":"textarea","id":"subheading","label":"Subheading","info":"Optional descriptive text below the heading"},{"type":"header","content":"Carousel Settings"},{"type":"checkbox","id":"show_arrows","label":"Show Navigation Arrows","default":true},{"type":"checkbox","id":"show_pagination","label":"Show Pagination Dots","default":true}],"blocks":[{"type":"testimonial","name":"Testimonial","settings":[{"type":"textarea","id":"quote","label":"Testimonial Quote","default":"I prodotti BenesserZen hanno trasformato la mia routine di benessere."},{"type":"text","id":"author_name","label":"Customer Name","default":"Maria Rossi"},{"type":"text","id":"author_title","label":"Customer Title","default":"Cliente Verificata, Milano"},{"type":"range","id":"rating","label":"Star Rating","min":1,"max":5,"step":1,"default":5}]}],"presets":[{"name":"Zen Testimonials","blocks":[{"type":"testimonial","settings":{"quote":"Ho preso la crema alla lavanda, mamma mia che profumo ragazzi, sembra di stare in un campo fiorito. Io la metto la sera e mi rilasso un sacco. Non so se √® suggestione ma dormo pure meglio.","author_name":"Alice P.","author_title":"Cliente Verificata, Arezzo (AR)","rating":5}},{"type":"testimonial","settings":{"quote":"Arrivato il pacco in due giorni, ben imballato. Ho preso il bracciale con le pietre, molto bello, le pietre sono fredde al tatto. Mia nipote gi√† me lo vuole rubare üòÇ","author_name":"Loredana G.","author_title":"Cliente Verificata, Seregno (MB)","rating":5}},{"type":"testimonial","settings":{"quote":"Devo dire che non sono uno che compra online, ma qui mi sono fidato e ho fatto bene. La tisana √® buonissima, non serve zucchero, e mi sento pi√π leggero dopo cena.","author_name":"Antonio C.","author_title":"Cliente Verificato, Fano (PU)","rating":5}},{"type":"testimonial","settings":{"quote":"Ho preso il ciondolo di ametista, bello lucente e non quei plasticoni che vendono in giro. Mia moglie contentissima, quindi ho fatto centro!","author_name":"Carla M.","author_title":"Cliente Verificata, Bitonto (BA)","rating":5}},{"type":"testimonial","settings":{"quote":"Buon prodotto. Uso la crema mani tutte le sere e la pelle non mi tira pi√π. Consiglio di usarla poco alla volta che √® bella corposa.","author_name":"Marta F.","author_title":"Cliente Verificata, Caltagirone (CT)","rating":4}},{"type":"testimonial","settings":{"quote":"Pacco arrivato un po' in ritardo per colpa del corriere ma il servizio clienti molto gentile. Ho preso un set regalo e la confezione era davvero elegante.","author_name":"Paola T.","author_title":"Cliente Verificata, Conegliano (TV)","rating":4}},{"type":"testimonial","settings":{"quote":"Il sapone artigianale dura un sacco e profuma tutta la stanza. Lo metto pure nei cassetti come faceva mia nonna. Consigliato.","author_name":"Giuliana B.","author_title":"Cliente Verificata, Vercelli (VC)","rating":5}},{"type":"testimonial","settings":{"quote":"Comprato l'olio essenziale di eucalipto, finalmente respiro meglio la notte. Io lo metto pure nel deumidificatore, fa un profumo in casa che √® una meraviglia.","author_name":"Enrico V.","author_title":"Cliente Verificato, Bressanone (BZ)","rating":5}},{"type":"testimonial","settings":{"quote":"Bella esperienza d'acquisto. Ho preso tre cose diverse e sono arrivate tutte ben confezionate. Non capita spesso di trovare negozi cos√¨ attenti.","author_name":"Simona L.","author_title":"Cliente Verificata, Pisticci (MT)","rating":5}},{"type":"testimonial","settings":{"quote":"Il braccialetto con la sodalite √® bellissimo, i colori sono vivi. Io non ci credo tanto a queste cose ma devo dire che da quando lo porto mi sento pi√π tranquilla.","author_name":"Francesco D.","author_title":"Cliente Verificato, Asti (AT)","rating":5}}]}]}
{% endschema %}